!function(){"use strict";var _namespace=function(){for(var t,e,n,r,i=arguments,s=0;s<i.length;s++)if(t=window,r=i[s],0!==r.indexOf("skyjs")&&(r="skyjs."+r),r.indexOf("."))for(n=r.split("."),e="window"===n[0]?1:0;e<n.length;e++)t[n[e]]=t[n[e]]||{},t=t[n[e]];else t[r]=t[r]||{}};_namespace("skyjs"),skyjs.currentDomain="",skyjs.utils={namespace:_namespace,isBrowserSupport:function(){return!this.isNodeJSSupport()},isNodeJSSupport:function(){return"undefined"!=typeof module&&module.exports?!0:!1},isAmdSupport:function(){return"function"==typeof define&&define.amd&&define.amd.async},isH5Support:function(){return"__proto__"in{}},isObject:function(t){return t===Object(t)},keys:function(t){if(!this.isObject(t))return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&(e[e.length]=n);return e},_fastBind:function(t,e){var n,r=Array.prototype.slice,i=arguments.length>2?2:arguments.length;return n=r.call(arguments,i),function(){return Array.prototype.push.apply(n,r.call(arguments)),t.apply(e,n)}},forEach:function(t,e,n){var r,i=t.length,s=arguments.length>2?this._fastBind(e,n):e;for(r=0;i>r;r++)s(t[r],r,t)},toNumber:function(t){return~~t},toBoolean:function(t){return!!t},_class2type:void 0,type:function(t){if(void 0===this._class2type){var e=this._class2type={};this.forEach("Boolean Number String Function Array Date RegExp Object".split(" "),function(t){e["[object "+t+"]"]=t.toLowerCase()})}return null==t?String(t):this._class2type[Object.prototype.toString.call(t)]||"object"},isString:function(t){return"string"==typeof t},isFunction:function(t){return"function"===this.type(t)},isArray:Array.isArray||function(t){return"array"===this.type(t)},isWindow:function(t){return null!=t&&t==t.window},_isPlainObject:function(t){var e=Object.prototype.hasOwnProperty;if(!t||"object"!==this.type(t)||t.nodeType||this.isWindow(t))return!1;try{if(t.constructor&&!e.call(t,"constructor")&&!e.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in t);return void 0===r||e.call(t,r)},extend:function(){var t,e,n,r,i,s,o=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[1]||{},a=2),"object"==typeof o||this.isFunction(o)||(o={}),u===a&&(o=this,--a);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],r=t[e],o!==r&&(c&&r&&(this._isPlainObject(r)||(i=this.isArray(r)))?(i?(i=!1,s=n&&this.isArray(n)?n:[]):s=n&&this._isPlainObject(n)?n:{},o[e]=this.extend(c,s,r)):void 0!==r&&(o[e]=r));return o},trim:String.prototype.trim&&!String.prototype.trim.call("﻿ ")?function(t){return null==t?"":String.prototype.trim.call(t)}:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},now:function(){return(new Date).getTime()},error:function(t){throw new Error(t)},parseJSON:function(t){return t&&"string"==typeof t?(t=this.trim(t),window.JSON&&window.JSON.parse?window.JSON.parse(t):/^[\],:{}\s]*$/.test(t.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+t)():void this.error("Invalid JSON: "+t)):null},debugJSON:function(t){return"object"==typeof JSON&&JSON.stringify?JSON.stringify(t):"null"},merge:function(t,e){var n=e.length,r=t.length,i=0;if("number"==typeof n)for(;n>i;i++)t[r++]=e[i];else for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},fmtJSONMsg:function(jsonData){var result,jsonMessage={status:"fail",code:"0",msg:"",result:{}};try{result="string"==typeof jsonData?"object"==typeof JSON&&JSON.parse?JSON.parse(jsonData):eval("("+jsonData+")"):jsonData,void 0!=result&&void 0==result.status?(jsonMessage.status="success",jsonMessage.code="0",jsonMessage.msg="",jsonMessage.result=result):void 0!=result&&(jsonMessage=result)}catch(err){jsonMessage={status:"fail",code:"0",msg:"服务器响应失败，请稍后重试或联系我们的客服！",result:{}}}return jsonMessage||{status:"fail",code:"0",msg:"",result:{}}},aop:function(t,e,n,r){var i=this,s=function(){var s,o;return t=t||this,n&&"function"==typeof n&&(s=n.apply(t,arguments),"undefined"!=typeof s)?s:(s=i.isArray(s)?s:arguments,o=e.apply(t,s),r&&"function"==typeof r&&(Array.prototype.unshift.call(s,o),o=r.apply(t,s)||o),o)};return s},nextTick:"undefined"!=typeof module&&module.exports?function(t,e){process.nextTick(function(){t(e)})}:function(t,e){setTimeout(function(){t(e)},0)},end:0},skyjs.plugin=function(t,e){var n=skyjs.utils.isString(t)?t:t.name;if(e=skyjs.utils.isFunction(t)?t:e,!skyjs.utils.isFunction(e))throw"Plugin fn required!";if(skyjs.plugins||(skyjs.plugins={}),skyjs.plugins[n])throw"Plugin name ["+n+" ] already exists!";n&&e&&(skyjs.plugins[n]=e),e(skyjs)},skyjs.ready=function(t){skyjs.utils.isFunction(t)&&skyjs.loadRes.ready(document,function(){t(skyjs,skyjs.app.newInstance())})}}(),skyjs.plugin("sysConfig",function(t){t.utils.namespace("sysConfig"),t.sysConfig.events={moduleIsReady:"skyjs.ready",end:0}}),!function(t){t=t||window,t.base=function(e,n,r,i){e.indexOf("base.")<0&&(e="base."+e);var s=e.split(".").slice(0,e.split(".").length-1).join(".");e=e.split(".")[e.split(".").length-1];for(var o=s.split(".").length,a=s.split("."),u=0;o>u;u++)t[s]=1>u?t[a[0]]:t[s][a[u]],i=t.utils.extend({},i,t[s].defaults),r=t.utils.extend(!0,{},r,t[s].prototype);if(t[s]=t[s]||{},t[e])throw new Error("base module ["+e+"] already exists!");t[e]=t.base[e]=t[s][e]=function(n,r){n=void 0===n?!0:n,this.options=t.utils.extend({},i,t[s][e].defaults,r),n&&this.init(),this.options.scope||(this.options.scope="singleton"),"singleton"===this.options.scope&&(t[e].instance=this)},t[s][e].getName=function(){return e},t[s][e].newInstance=function(n,r){if(t[e].instance)return t[e].instance;var i=new t[s][e](!1,r);return i.init(n),i},t[s][e].prototype=t.utils.extend(!0,{},r,n),t[s][e].prototype._super=function(t,e){return r[t].call(this,e)}},t.base.prototype={init:function(){return this},option:function(t,e){return"string"==typeof t?"undefined"==typeof e?this.options[t]:this.options[t]=e:void 0}},t.base.defaults={scope:"singleton",end:0}}(skyjs),skyjs.plugin("joquery",function(t){t.base("joquery",{init:function(){return void 0===arguments?this:(this.items=arguments[0].slice(),this)},toArray:function(){return this.items},where:function(e,n){for(var r=new Array,i=0;i<this.items.length&&(!e(this.items[i],i)||(r[r.length]=this.items[i],!n));i++);return t.joquery.newInstance(r)},select:function(e){for(var n=new Array,r=0;r<this.items.length;r++)e(this.items[r])&&(n[n.length]=this.items[r]);return t.joquery.newInstance(n)},orderBy:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var r=e(t),i=e(n);return i>r?-1:r>i?1:0}))},orderByDesc:function(e){return t.joquery.newInstance(this.items.slice().sort(function(t,n){var r=e(n),i=e(t);return i>r?-1:r>i?1:0}))},selectMany:function(e){for(var n=new Array,r=0;r<this.items.length;r++)n=n.concat(e(this.items[r]));return t.joquery.newInstance(n)},count:function(t){return null==t?this.items.length:this.where(t).items.length},distinct:function(e){for(var n,r={},i=[],s=0;s<this.items.length;s++)n=e(this.items[s]),r[n]||(r[n]=!0,i[i.length]=this.items[s]);return r=null,t.joquery.newInstance(i)},any:function(t){for(var e={matched:!1,index:-1,item:{}},n=0;n<this.items.length;n++)if(t(this.items[n],n))return{matched:!0,index:n,item:this.items[n]};return e},all:function(t){for(var e=0;e<this.items.length;e++)if(!t(this.items[e],e))return!1;return!0},reverse:function(){for(var e=new Array,n=this.items.length-1;n>-1;n--)e[e.length]=this.items[n];return t.joquery.newInstance(e)},first:function(t){return null!=t?this.where(t,!0).first():this.items.length>0?this.items[0]:null},last:function(t){return null!=t?this.reverse().first(t):this.items.length>0?this.items[this.items.length-1]:null},elementAt:function(t){return this.items[t]},concatArray:function(e){var n=e.items||e;return t.joquery.newInstance(this.items.concat(n))},intersect:function(e,n){var r;r=void 0!=n?n:function(t,e,n){return t==n};for(var i=e.items||e,s=new Array,o=0;o<this.items.length;o++)for(var a=0;a<i.length;a++)r(this.items[o],o,i[a],a)&&(s[s.length]=this.items[o]);return t.joquery.newInstance(s)},defaultIfEmpty:function(t){return 0==this.items.length?t:this},elementAtOrDefault:function(t,e){return t>=0&&t<this.items.length?this.items[t]:e},firstOrDefault:function(t){return this.first()||t},lastOrDefault:function(t){return this.last()||t},insert:function(t,e){var n={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var r=0;r<this.items.length;r++)if(e(this.items[r],r))return this.items.splice(r,0,t),{matched:!0,index:r,item:t};return n.matched?n:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})},updateOrInsert:function(t,e,n){var r={matched:!1,index:-1,item:{}};if(this.items.length<1)return this.items.splice(0,0,t),{matched:!0,index:0,item:t};for(var i=0;i<this.items.length;i++){if(void 0!=e&&e(this.items[i],i))return this.items[i]=t,{matched:!0,index:i,item:t};if(n(this.items[i],i))return this.items.splice(i,0,t),{matched:!0,index:i,item:t}}return r.matched?r:(this.items[this.items.length]=t,{matched:!0,index:this.items.length-1,item:t})}}),t.joquery.defaults={scope:"prototype",end:0}}),skyjs.plugin("async",function(t){!function(e){"use strict";t.utils.isNodeJSSupport()?e(exports):t.utils.isAmdSupport()?define("async",function(){return e()}):t.utils.isBrowserSupport()&&(t.async=e())}(function(e){"use strict";var n=function(){},r=function(){},i=function(e,n){var s=null;if(e.promise===n)return e.reject(new TypeError("Cannot resolve a promise with itself"));if(n instanceof r)return"fulfilled"===n.state?e.fulfill(n.result):"rejected"===n.state?e.reject(n.result):n.then(e.fulfill,e.reject);try{if(!t.utils.isObject(n)&&!t.utils.isFunction(n)||!t.utils.isFunction(s=n.then))return e.fulfill(n)}catch(o){e.reject(o)}s(function(t){i(e,t)},function(t){e.reject(t)})},s=function(t,e){return function(n){try{i(e,t(n))}catch(r){e.reject(r)}}},o=function(){var e,a="pending",u=[],c=[],l=new r,f=null,d=function(n,r){if("rejected"!==a){t.utils.isFunction(n)||(n=function(t){return t});var i=s(n,r);"fulfilled"===a?t.utils.nextTick(i,e):u.push(i)}},h=function(n,r){if("fulfilled"!==a){t.utils.isFunction(n)||(n=function(t){throw t});var i=s(n,r);"rejected"===a?t.utils.nextTick(i,e):c.push(i)}},p=function(t){if("pending"===a){a="fulfilled";for(var n=0,r=u.length;r>n;++n)u[n](t);return u=[],e=t,l}},m=function(t){if("pending"===a){a="rejected";for(var n=0,r=c.length;r>n;++n)c[n](t);return c=[],e=t,l}};return l.then=function(t,e){var n=o();return d(t,n),h(e,n),n.promise},l.state=a,l.result=e,n.prototype=l,f=new n,f.promise=l,f.fulfill=p,f.reject=m,f.resolve=function(t){i(this,t)},f};return e=e||{},e.defer=o,e.version="1.0.0",e})}),skyjs.plugin("amd",function(t){var e=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,n=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,r={},i={},s={require:{id:"require",getInstance:function(){return function(t){if("string"==typeof t){if(s[t])return s[t].getInstance;throw new Error(t+" has not been defined. Please include it as a dependency in define()")}}}()},exports:{id:"exports",getInstance:function(){return s}()},module:{id:"module",getInstance:function(){return function(t){return{id:t,uri:o.toUrl(t)}}}}},o={};define=function(t,r,s){var o=arguments.length;1===o?(s=t,r=void 0,t=void 0):2===o&&("[object Array]"==={}.toString.call(t)?(s=r,r=t,t=void 0):(s=r,r=void 0)),r||"function"!=typeof s||(r=[],s.length&&(s.toString().replace(e,"").replace(n,function(t,e){r.push(e)}),r=(1===s.length?["require"]:["require","exports","module"]).concat(r))),t&&!i[t]&&(i[t]={id:t,deps:r||[],callback:s})},require=function(e,n,r){var a=[],u=t.async.defer();"string"!=typeof e&&(o.loadParsedRequireStack(e,[],0,u),u.promise.then(function(){o.getDepsStack(e,a),a=t.joquery.newInstance(a).orderByDesc(function(e){var n=i[e].deps||[],r=0;return t.utils.forEach(n,function(t){"require"!==t&&"exports"!==t&&"module"!==t&&r++}),r}).toArray();for(var c=a.length-1;c>=0;c--){var l=a[c];s[l]||(s[l]={id:l,getInstance:function(){try{for(var t=[],e=i[l].deps,n=0;n<e.length;n++)(s[e[n]]||{}).getInstance&&(t[t.length]=(s[e[n]]||{}).getInstance);return i[l].callback.apply(null,t)}catch(r){u.reject(r.message)}}()})}for(var f=[],d=0;d<e.length;d++)switch(e[d]){case"require":f[d]=s.require.getInstance;break;case"exports":f[d]=s.exports.getInstance("context");break;case"module":f[d]=s.module.getInstance()("context");break;case s[r]?s[r].id:"":f[d]=s[r].getInstance();break;default:f[d]=s[e[d]].getInstance}n&&n.apply(null,f)},function(t){throw new Error("Error Occurred in require promise1:"+t.message)}).then(function(){},function(e){throw t.utils.isH5Support()&&console.log("Error Occurred in require promise2:"+e.message),new Error("Error Occurred in require promise2:"+e.message)}))},define.config={baseUrl:"http://localhost:63342/skyjs/lib/amd/",alias:{xxx:"plugins/xxx.min"},usingInclude:{"default":!0,module:{foo:!1}},shim:{backbone:{deps:["underscore","jquery"],exports:"Backbone"}}},define.amd={async:!0},o.getDepsStack=function(t,e,n){n=n||{},"string"==typeof t&&(t=[t]);for(var r=0;r<t.length;r++){var s=t[r];if("require"!==s&&"exports"!==s&&"module"!==s&&i[s]){if(n[s])continue;n[s]=!0,e[e.length]=s;for(var a=i[s].deps||[],u=a.length-1;u>=0;u--)o.getDepsStack(a[u],e,n)}}},o.loadParsedRequireStack=function(e,n,r,s){var a=[];n=n||[],o.parseRequireStack(e,n);for(var u=0;u<n.length;u++)a[a.length]=o.toUrl(n[u])+".js";1>r&&a.length<1&&s.resolve(e),a.length>0&&(r+=a.length,t.includeRes.loadHeadRes(a,function(){r-=a.length;for(var t=[],e=0;e<n.length;e++)t=t.concat(i[n[e]].deps);o.loadParsedRequireStack(t,[],r,s)}))},o.parseRequireStack=function(t,e){"string"==typeof t&&(t=[t]),e=e||[];for(var n=0;n<t.length;n++){var s=t[n];if(!r[s])switch(r[s]=!0,s){case"require":break;case"exports":break;case"module":break;default:i[s]?i[s].deps&&i[s].deps.length>0&&o.parseRequireStack(i[s].deps,e):e.splice(0,0,s)}}},o.toUrl=function(t,e){var n,r,i;switch(define.config.alias[t]&&(t=define.config.alias[t]),t){case"require":case"exports":case"module":return t}for(n=(e||define.config.baseUrl).split("/"),n.pop(),t=t.split("/"),r=t.length;--r;)switch(t[0]){case"..":n.pop();case".":case"":t.shift(),i=!0}return n.join("/")+"/"+t.join("/")}}),!function(t,e){"use strict";function n(){}function r(t,e){if(t){"object"==typeof t&&(t=[].slice.call(t));for(var n=0,r=t.length;r>n;n++)e.call(t,t[n],n)}}function i(t,n){var r=Object.prototype.toString.call(n).slice(8,-1);return n!==e&&null!==n&&r===t}function s(t){return i("Function",t)}function o(t){return i("Array",t)}function a(t){var e=t.split("/"),n=e[e.length-1],r=n.indexOf("?");return-1!==r?n.substring(0,r):n}function u(t){t=t||n,t._done||(t(),t._done=1)}function c(t,e,r,i){var s="object"==typeof t?t:{test:t,success:e?o(e)?e:[e]:!1,failure:r?o(r)?r:[r]:!1,callback:i||n},a=!!s.test;return a&&s.success?(s.success.push(s.callback),I.load.apply(null,s.success)):!a&&s.failure?(s.failure.push(s.callback),I.load.apply(null,s.failure)):i(),I}function l(t){var e={};if("object"==typeof t)for(var n in t)t[n]&&(e={name:n,url:t[n]});else e={name:a(t),url:t};var r=E[e.name];return r&&r.url===e.url?r:(E[e.name]=e,e)}function f(t){t=t||E;for(var e in t)if(t.hasOwnProperty(e)&&t[e].state!==M)return!1;return!0}function d(t){t.state=_,r(t.onpreload,function(t){t.call()})}function h(t){t.state===e&&(t.state=D,t.onpreload=[],v({url:t.url,type:"cache"},function(){d(t)}))}function p(){var t=arguments,e=t[t.length-1],n=[].slice.call(t,1),i=n[0];return s(e)||(e=null),o(t[0])?(t[0].push(e),I.load.apply(null,t[0]),I):(i?(r(n,function(t){!s(t)&&t&&h(l(t))}),y(l(t[0]),s(i)?i:function(){I.load.apply(null,n)})):y(l(t[0])),I)}function m(){var t=arguments,e=t[t.length-1],n={};return s(e)||(e=null),o(t[0])?(t[0].push(e),I.load.apply(null,t[0]),I):(r(t,function(t){t!==e&&(t=l(t),n[t.name]=t)}),r(t,function(t){t!==e&&(t=l(t),y(t,function(){f(n)&&u(e)}))}),I)}function y(t,e){return e=e||n,t.state===M?void e():t.state===R?void I.ready(t.name,e):t.state===D?void t.onpreload.push(function(){y(t,e)}):(t.state=R,void v(t,function(){t.state=M,e(),r($[t.name],function(t){u(t)}),x&&f()&&r($.ALL,function(t){u(t)})}))}function g(t){t=t||"";var e=t.split("?")[0].split(".");return e[e.length-1].toLowerCase()}function v(e,r){function i(e){e=e||t.event,a.onload=a.onreadystatechange=a.onerror=null,r()}function s(n){n=n||t.event,("load"===n.type||/loaded|complete/.test(a.readyState)&&(!S.documentMode||S.documentMode<9))&&(t.clearTimeout(e.errorTimeout),t.clearTimeout(e.cssTimeout),a.onload=a.onreadystatechange=a.onerror=null,r())}function o(){if(e.state!==M&&e.cssRetries<=20){for(var n=0,r=S.styleSheets.length;r>n;n++)if(S.styleSheets[n].href===a.href)return void s({type:"load"});e.cssRetries++,e.cssTimeout=t.setTimeout(o,250)}}r=r||n;var a,u=g(e.url);"css"===u?(a=S.createElement("link"),a.type="text/"+(e.type||"css"),a.rel="stylesheet",a.href=e.url,e.cssRetries=0,e.cssTimeout=t.setTimeout(o,500)):(a=S.createElement("script"),a.type="text/"+(e.type||"javascript"),a.src=e.url),a.onload=a.onreadystatechange=s,a.onerror=i,a.async=!1,a.defer=!1,e.errorTimeout=t.setTimeout(function(){i({type:"timeout"})},7e3);var c=S.head||S.getElementsByTagName("head")[0];c.insertBefore(a,c.lastChild)}function j(){for(var t=S.getElementsByTagName("script"),e=0,n=t.length;n>e;e++){var r=t[e].getAttribute("data-headjs-load");if(r)return void I.load(r)}}function w(t,e){if(t===S)return x?u(e):O.push(e),I;if(s(t)&&(e=t,t="ALL"),o(t)){var n={};return r(t,function(t){n[t]=E[t],I.ready(t,function(){f(n)&&u(e)})}),I}if("string"!=typeof t||!s(e))return I;var i=E[t];if(i&&i.state===M||"ALL"===t&&f()&&x)return u(e),I;var a=$[t];return a?a.push(e):a=$[t]=[e],I}function b(){return S.body?void(x||(x=!0,j(),r(O,function(t){u(t)}))):(t.clearTimeout(I.readyTimeout),void(I.readyTimeout=t.setTimeout(b,50)))}function k(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",k,!1),b()):"complete"===S.readyState&&(S.detachEvent("onreadystatechange",k),b())}var x,S=t.document,O=[],$={},E={},A="async"in S.createElement("script")||"MozAppearance"in S.documentElement.style||t.opera,q=t.head_conf&&t.head_conf.head||"head",I=t[q]=t[q]||function(){I.ready.apply(null,arguments)},D=1,_=2,R=3,M=4;if("complete"===S.readyState)b();else if(S.addEventListener)S.addEventListener("DOMContentLoaded",k,!1),t.addEventListener("load",b,!1);else{S.attachEvent("onreadystatechange",k),t.attachEvent("onload",b);var T=!1;try{T=!t.frameElement&&S.documentElement}catch(N){}T&&T.doScroll&&!function P(){if(!x){try{T.doScroll("left")}catch(e){return t.clearTimeout(I.readyTimeout),void(I.readyTimeout=t.setTimeout(P,50))}b()}}()}I.load=I.js=A?m:p,I.test=c,I.ready=w,I.ready(S,function(){f()&&r($.ALL,function(t){u(t)}),I.feature&&I.feature("domloaded",!0)}),skyjs.utils.namespace("loadRes"),skyjs.loadRes=I}(window),skyjs.plugin("includeRes",function($$){$$.utils.namespace("includeRes"),$$.includeRes={writejs:function(t,e){document.write('<script type="text/javascript" src='+t+' charset="'+(e||"UTF-8")+'"></script>')},writecss:function(t,e){if(e=e||!0){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}else document.write('<link type="text/css" rel="stylesheet" href="'+t+'" />')},loadHeadRes:function(){for(var t=arguments,e=[],n=0;n<t.length;n++)$$.utils.isArray(t[n])?e=e.concat(t[n]):e[e.length]=t[n];$$.loadRes.js.apply(null,e)},load:function(t){this._parseLoadedRes(t);for(var e=this.getVersion(),n=[],r=0;r<this.sources.length;r++){var i=this.sources[r];void 0!==i.f&&""!==i.f&&(n[n.length]=i.f+"?v="+e)}n=$$.joquery.newInstance(n).distinct(function(t){return t}).toArray();for(var s=0;s<n.length;s++)this.writejs(n[s]);return this},loadedModuleName:{},loadModules:function(t){if(t=$$.utils.extend({name:"",type:"js",mdCallback:function(){},handleUrlsCallback:function(){},afterLoadedCallback:function(){}},t),"undefined"!=typeof $$.includeRes.sources){var e=$$.includeRes.sources;if(e=$$.joquery.newInstance(e).select(function(e){return e.n===t.name&&e.t===t.type}).toArray(),e.length<1)return this;for(var n=[],r=0;r<e.length;r++)if(""===e[r].n||!$$.includeRes.loadedModuleName[e[r].n]){var i=e[r];void 0!==i.d&&""===($$.currentDomain||"")&&($$.currentDomain=i.d);for(var s=i.m.split(";"),o=0;o<s.length;o++){var a=s[o];t.mdCallback.call(null,i,a,n)}$$.includeRes.loadedModuleName[i.n]=i.n}if(n=$$.joquery.newInstance(t.handleUrlsCallback.call(null,n)||n).distinct(function(t){return t}).toArray(),n.length>=0)if("js"===t.type)n.length<1?t.afterLoadedCallback&&t.afterLoadedCallback():this.loadHeadRes(n.concat([t.afterLoadedCallback]));else if("css"===t.type)for(var u=n.length,c=0;u>c;c++)this.writecss(n[c],!1)}return this},sources:[],getVersion:function(t){t=t||2;var e=new Date,n=e.getDate()<=9?"0"+e.getDate():e.getDate(),r=e.getHours()<=9?"0"+e.getHours():e.getHours(),i=e.getMinutes()%2==0?e.getMinutes():e.getMinutes()-e.getMinutes()%t,s=9>=i?"0"+i:i;return""+e.getFullYear()+(e.getMonth()+1)+n+r+s},_parseLoadedRes:function(options){options=$$.utils.extend({loadfile:"core-[0-9]+.[0-9]+.[0-9]+.js|core-[0-9]+.[0-9]+.[0-9]+.min.js|onlyforload.js|core.min.js|core.js",isScript:!1,src:'{n:"",t:"js",m:"default;"}'},options),this.sources.length=0,this.sources[this.sources.length]={n:"",t:"js",m:"default;"};for(var scripts=options.isScript?document.getElementsByTagName("script"):options.src.split("|"),i=0;i<scripts.length;i++){var src=options.isScript?scripts[i].src:scripts[i].indexOf("^")<0?"onlyforload.js^"+scripts[i]:scripts[i],scriptOptions={},isParsed=options.isScript?src.isparsed||!1:!1;if(src&&src.match(options.loadfile)&&!isParsed&&-1!=src.indexOf("^")){for(var multiSrcOptions=src.split("^")[1].replace(new RegExp("%22","gm"),'"').replace(new RegExp("%27","gm"),"'").split("|"),j=0;j<multiSrcOptions.length;j++){srcOptions=multiSrcOptions[j];try{scriptOptions=eval("("+srcOptions+")")}catch(err){"object"==typeof JSON&&JSON.parse&&(scriptOptions=JSON.parse(srcOptions))}this.sources[this.sources.length]=scriptOptions}options.isScript&&scripts[i].setAttribute("isparsed","true")}}return this.sources}},$$.utils.isAmdSupport()&&(define("skyjs",function(){return $$}),define("utils",function(){return $$.utils}),define("joquery",function(){return $$.joquery}),define("async",function(){return $$.async}),define("base",function(){return $$.base}),define("loader",function(){return $$.includeRes}),define("eventProxy",function(){return $$.eventProxy.newInstance()}),define("fsm",function(){return $$.fsm}),define("app",function(){return $$.app.newInstance()})),$$.includeRes.load({isScript:!0})}),skyjs.plugin("eventProxy",function(t){t.base("eventProxy",{init:function(){return this.channels={},this},on:function(t,e,n){var r,i,s,o,a,u;if(null==n&&(n=this),null==this.channels[t]&&(this.channels[t]=[]),s=this,t instanceof Array){for(u=[],o=0,a=t.length;a>o;o++)r=t[o],u.push(this.subscribe(r,e,n));return u}return i={context:n,callback:e},{attach:function(){return s.channels[t].push(i),this},detach:function(){return Mediator._rm(s,t,i.callback),this}}.attach()},off:function(t,e){var n;switch(typeof t){case"string":"function"==typeof e&&Mediator._rm(this,t,e),"undefined"==typeof e&&Mediator._rm(this,t);break;case"function":for(n in this.channels)Mediator._rm(this,n,t);break;case"undefined":for(n in this.channels)Mediator._rm(this,n);break;case"object":for(n in this.channels)Mediator._rm(this,n,null,t)}return this},emit:function(t,e,n){var r,i,s,o,a,u,c;if(null!=this.channels[t])for(c=this.channels[t],a=0,u=c.length;u>a;a++)if(s=c[a],n!==!0&&"object"==typeof e){if(e instanceof Array)r=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)o=e[t],r.push(o);return r}();else{r={};for(i in e)o=e[i],r[i]=o}s.callback.apply(s.context,[r,t])}else s.callback.apply(s.context,[e,t]);return this},end:0}),t.eventProxy.defaults={scope:"singleton",end:0}}),skyjs.plugin("app",function(t){t.base("app",{init:function(){return this.moduleData={},this.eventProxy=t.eventProxy.newInstance(),this},register:function(t,e){try{var n=t.getName();return e=e||{},this._addModule(n,t,e),e.init?this.start(n):n}catch(r){throw new Error("could not register "+n+" because: "+r.stack||r.message)}},registerAndStart:function(t,e){return this.start(this.register(t,e))},unregister:function(t){return null!=this.moduleData[t]?(delete this.moduleData[t],!0):!1},start:function(t){if(!t)return!1;try{if(null==this.moduleData[t])throw new Error("module "+t+" does not exist");var e=this.moduleData[t].options;null==e&&(e={});var n=this._createInstance(t,e);if(n.running===!0)throw new Error("module "+t+" was already started");if("function"!=typeof n.init)throw new Error("module "+t+" do not have an init function");return n.option(n.options),n.running=!0,this.moduleData[t].instance=n,"function"==typeof e.callback&&e.callback(),!0}catch(r){throw new Error(t+" init Error: "+r.stack||r.message)}},startAll:function(){var e,n=[];for(e in this.moduleData)this.moduleData.hasOwnProperty(e)&&n.push(this.start(e));return this.eventProxy.emit(t.sysConfig.events.moduleIsReady),n},stop:function(e){var n=this.moduleData[e];return n.instance?(t.utils.isFunction(n.instance.destroy)&&n.instance.destroy(),n.instance.running=!1,n.instance=null,!0):!1},stopAll:function(){var t,e;e=[];for(t in this.moduleData)this.moduleData.hasOwnProperty(t)&&e.push(this.stop(t));return e},restart:function(t){return this.stop(t)?this.start(t):!1},_addModule:function(t,e,n){if("string"!=typeof t)throw new Error("moudule ID has to be a string");var r=e;if("string"==typeof e&&(e=this._parseFunction(e)),"function"!=typeof e)throw new Error(e+" creator "+r+" has to be a constructor function");if("object"!=typeof n)throw new Error("option parameter has to be an object");if(null!=this.moduleData[t])throw new Error("module was already registered");return this.moduleData[t]={creator:e,options:n},!0},_createInstance:function(e,n){var r=this.moduleData[e];return null!=r.instance?r.instance:r.creator.newInstance(t.eventProxy.newInstance(),n)},_parseFunction:function(e){for(var n=e.split("."),r=n.length,i=window,s=t.utils.isWindow(n[0])?1:0;r>s;s++){if(!t.utils.isFunction(i[n[s]])&&!t.utils.isPlainObject(i[n[s]]))return null;i=i[n[s]]}return t.utils.isFunction(i)?i:null},end:0}),t.app.defaults={scope:"singleton",end:0}});